"use strict";function e(e){if(e&&e.__esModule)return e;var t={};return e&&Object.keys(e).forEach((function(r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})})),t.default=e,t}var t,r=require("prop-types"),n=require("react"),o=require("@web3-react/core"),a=(t=require("jsbi"))&&"object"==typeof t&&"default"in t?t.default:t;class i extends Error{constructor(e,...t){super(...t),this.name="ChainUnsupportedError",this.message=e}}class c extends Error{constructor(e,...t){super(...t),this.name="ConnectorUnsupportedError",this.message=`Unsupported connector: ${e}.`}}class u extends Error{constructor(...e){super(...e),this.name="ConnectionRejectedError",this.message="The activation has been rejected by the provider."}}class s extends Error{constructor(...e){super(...e),this.name="ConnectorConfigError"}}async function l(){const{FortmaticConnector:t}=await new Promise((function(t){t(e(require("@web3-react/fortmatic-connector")))}));return{web3ReactConnector({chainId:e,apiKey:r}){if(!r)throw new s("The Fortmatic connector requires apiKey to be set.");return new t({apiKey:r,chainId:e})}}}async function h(){const{FrameConnector:t,UserRejectedRequestError:r}=await new Promise((function(t){t(e(require("@web3-react/frame-connector")))}));return{web3ReactConnector:({chainId:e})=>new t({supportedChainIds:[e]}),handleActivationError:e=>e instanceof r?new u:e.message.startsWith("JSON.parse")?new Error("There seems to be an issue when trying to connect to Frame."):null}}async function p(){const{InjectedConnector:t,UserRejectedRequestError:r}=await new Promise((function(t){t(e(require("@web3-react/injected-connector")))}));return{web3ReactConnector:({chainId:e})=>new t({supportedChainIds:e}),handleActivationError:e=>e instanceof r?new u:null}}async function d(){const{PortisConnector:t}=await new Promise((function(t){t(e(require("@web3-react/portis-connector")))}));return{web3ReactConnector({chainId:e,dAppId:r}){if(!r)throw new s("The Portis connector requires dAppId to be set.");return new t({dAppId:r,networks:e})}}}async function f(){const{ProvidedConnector:t,UserRejectedRequestError:r}=await new Promise((function(t){t(e(require("@aragon/provided-connector")))}));return{web3ReactConnector:({chainId:e,provider:r})=>new t({provider:r,supportedChainIds:e}),handleActivationError:e=>e instanceof r?new u:null}}async function m(){const{TorusConnector:t}=await new Promise((function(t){t(e(require("@web3-react/torus-connector")))}));return{web3ReactConnector:({chainId:e,initOptions:r,constructorOptions:n})=>new t({chainId:e,constructorOptions:n,initOptions:r})}}async function y(){const{UserRejectedRequestError:t,WalletConnectConnector:r}=await new Promise((function(t){t(e(require("@web3-react/walletconnect-connector")))}));return{web3ReactConnector({chainId:e,rpcUrl:t,bridge:n,pollingInterval:o}){if(!t)throw new s("The WalletConnect connector requires rpcUrl to be set.");if(!/^https?:\/\//.test(t))throw new s("The WalletConnect connector requires rpcUrl to be an HTTP URL.");return new r({bridge:n,pollingInterval:o,qrcode:!0,rpc:{[e]:t}})},handleActivationError:e=>e instanceof t?new u:null}}async function v(){const{WalletLinkConnector:t}=await new Promise((function(t){t(e(require("@web3-react/walletlink-connector")))}));return{web3ReactConnector({chainId:e,url:r,appName:n,appLogoUrl:o}){if(1!==e)throw new s("The WalletLink connector requires chainId to be 1.");if(!/^https?:\/\//.test(r))throw new s("The WalletLink connector requires url to be an HTTP URL.");return new t({url:r,appName:n,appLogoUrl:o})}}}async function w(){const{LedgerConnector:t}=await new Promise((function(t){t(e(require("@web3-react/ledger-connector")))}));return{web3ReactConnector({chainId:e,url:r}){if(!r)throw new s("The Ledger connector requires url to be set.");return new t({url:r,chainId:e,pollingInterval:12e3,baseDerivationPath:"m/44'/60'/0'/0"})}}}function g(e){if(function(e){return"object"==typeof e&&null!==e&&"jsonrpc"in e}(e)){if(e.error)throw new Error(e.error);return e.result||null}return e||null}async function b(e,t,r){if(e.request)return e.request({method:t,params:r}).then(g);if(e.sendAsync&&e.selectedAddress)return new Promise((n,o)=>{e.sendAsync({method:t,params:r,from:e.selectedAddress,jsonrpc:"2.0",id:0},(e,t)=>{e?o(e):n(t)})}).then(g);if(e.send)return e.send(t,r).then(g);throw new Error("The Ethereum provider doesnâ€™t seem to provide a request method.")}function E(e,t){let r,n=!1;const o=async(e,a)=>{const i=await e();n||(a(i),r=setTimeout(o.bind(null,e,a),t))};return(...t)=>{const{request:a,onResult:i}=e(...t);return n=!1,o(a,i),()=>{n=!0,clearTimeout(r)}}}!function(e){var t=function(e){var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=Object.create((t&&t.prototype instanceof h?t:h).prototype),a=new C(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=b(i,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(e,r,a),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l={};function h(){}function p(){}function d(){}var f={};f[o]=function(){return this};var m=Object.getPrototypeOf,y=m&&m(m(x([])));y&&y!==t&&r.call(y,o)&&(f=y);var v=d.prototype=h.prototype=Object.create(f);function w(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function g(e,t){var n;this._invoke=function(o,a){function i(){return new t((function(n,i){!function n(o,a,i,c){var u=s(e[o],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(h).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function b(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,l;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function x(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:N}}function N(){return{value:void 0,done:!0}}return p.prototype=v.constructor=d,d.constructor=p,p.displayName=c(d,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,c(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},w(g.prototype),g.prototype[a]=function(){return this},e.AsyncIterator=g,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var i=new g(u(t,r,n,o),a);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(v),c(v,i,"Generator"),v[o]=function(){return this},v.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=x,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:x(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},e}({});try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}();const k={name:"Ether",symbol:"ETH",decimals:18},C={name:"Matic Token",symbol:"MATIC",decimals:18},x={name:"ONE Token",symbol:"ONE",decimals:18},N=new Map([[1,{id:1,nativeCurrency:k,type:"main",fullName:"Ethereum Mainnet",shortName:"Mainnet",explorerUrl:"https://etherscan.io"}],[2,{id:2,type:"expanse"}],[3,{id:3,nativeCurrency:k,type:"ropsten",fullName:"Ethereum Ropsten",shortName:"Ropsten",explorerUrl:"https://ropsten.etherscan.io"}],[4,{id:4,nativeCurrency:k,type:"rinkeby",fullName:"Ethereum Rinkeby",shortName:"Rinkeby",explorerUrl:"https://rinkeby.etherscan.io"}],[5,{id:5,nativeCurrency:k,type:"goerli",fullName:"Ethereum Goerli",shortName:"Goerli",explorerUrl:"https://goerli.etherscan.io"}],[8,{id:8,type:"ubiq"}],[42,{id:42,nativeCurrency:k,type:"kovan",fullName:"Ethereum Kovan",shortName:"Kovan",explorerUrl:"https://kovan.etherscan.io"}],[100,{id:100,type:"xdai"}],[137,{id:137,nativeCurrency:C,type:"matic",fullName:"Polygon Mainnet",shortName:"Matic",explorerUrl:"https://polygonscan.com"}],[80001,{id:80001,nativeCurrency:C,type:"mumbai",fullName:"Polygon Testnet",shortName:"Mumbai",explorerUrl:"https://mumbai.polygonscan.com"}],[16667e5,{id:16667e5,nativeCurrency:x,type:"harmonyTest",fullName:"Harmony ONE Testnet",shortName:"Harmony Testnet",explorerUrl:"https://explorer.pops.one/"}],[16666e5,{id:16666e5,nativeCurrency:x,type:"harmony",fullName:"Harmony ONE",shortName:"Harmony",explorerUrl:"https://explorer.harmony.one/"}],[1337,{id:1337,type:"local",nativeCurrency:x}],[5777,{id:5777,type:"ganache"}]]),I="https://storageapi.fleek.co/aragonone-team-bucket/wallet-icons",L=new Map([{id:"frame",name:"Frame",type:"Desktop",image:I+"/Frame.png",strings:{"your Ethereum wallet":"Frame"}},{id:"metamask",name:"Metamask",type:"Desktop",image:I+"/Metamask.png",strings:{"your Ethereum wallet":"Metamask"}},{id:"status",name:"Status",type:"Mobile",image:I+"/Status.png",strings:{"your Ethereum wallet":"Status"}},{id:"cipher",name:"Cipher",type:"Mobile",image:I+"/Cipher.png",strings:{"your Ethereum wallet":"Cipher"}},{id:"fortmatic",name:"Fortmatic",type:"Any",image:I+"/Fortmatic.svg",strings:{"your Ethereum wallet":"Fortmatic"}},{id:"portis",name:"Portis",type:"Any",image:I+"/Portis.svg",strings:{"your Ethereum wallet":"Portis"}},{id:"unknown",name:"Unknown",type:"Desktop",image:I+"/wallet.svg",strings:{"your Ethereum wallet":"your wallet"}}].map(e=>[e.id,e]));function P(e){return L.get(e)}function R(e){return"injected"===e||"provided"===e?P((t=window.ethereum)&&"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0?"frame":t&&t.isMetaMask?"metamask":"unknown")||P("unknown"):P(e)||P("unknown");var t}const j=n.createContext(null);function T(){const e=n.useContext(j);if(null===e)throw new Error("useWallet() can only be used inside of <UseWalletProvider />, please declare it at a higher level.");const t=function(){const e=n.useContext(j),[t,r]=n.useState(null),o=n.useRef(!1),a=n.useCallback(()=>null===e?null:(o.current=!0,e.addBlockNumberListener(r),t),[e,t]);return n.useEffect(()=>{if(o.current&&null!==e)return e.addBlockNumberListener(r),()=>{e.removeBlockNumberListener(r)}},[o,e]),a}(),{wallet:r}=e;return n.useMemo(()=>({...r,getBlockNumber:t}),[t,r])}function q({children:e,connectors:t,pollBalanceInterval:r,pollBlockNumberInterval:u}){if(null!==n.useContext(j))throw new Error("<UseWalletProvider /> has already been declared.");const[s,g]=n.useState(null),[k,C]=n.useState(null),[x,I]=n.useState(null),[L,P]=n.useState("disconnected"),T=o.useWeb3React(),q=n.useRef(0),{account:U,chainId:O,library:B,error:S}=T,_=function({account:e,ethereum:t,pollBalanceInterval:r}){const[o,i]=n.useState("-1");return n.useEffect(()=>{if(!e||!t)return;let n=!1;const o=E((e,t,r)=>{let o="-1";return{request:async()=>async function(e,t){return b(e,"eth_getBalance",[t,"latest"])}(t,e).then(e=>e?a.BigInt(e).toString():"-1").catch(()=>"-1"),onResult(e){n||e===o||(o=e,r(e))}}},r)(e,t,i);return()=>{n=!0,o(),i("-1")}},[e,t,r]),o}({account:U,ethereum:B,pollBalanceInterval:r}),{addBlockNumberListener:A,removeBlockNumberListener:M}=function({ethereum:e,pollBlockNumberInterval:t}){const r=n.useRef(null),o=n.useRef(new Set),i=n.useCallback(e=>{o.current.has(e)||(e(r.current),o.current.add(e))},[]),c=n.useCallback(e=>{o.current.delete(e)},[]),u=n.useCallback(e=>{r.current!==e&&(r.current=e,o.current.forEach(t=>t(e)))},[]);return n.useEffect(()=>{if(!e)return void u(null);let r=!1;const n=E(()=>({request:()=>async function(e){return b(e,"eth_blockNumber",[])}(e),onResult:e=>{r||u(null===e?null:a.BigInt(e).toString())}}),t)();return()=>{r=!0,n()}},[e,t,u]),{addBlockNumberListener:i,removeBlockNumberListener:c}}({ethereum:B,pollBlockNumberInterval:u}),F=n.useMemo(()=>function(e={}){const t={fortmatic:[l,null],frame:[h,null],injected:[p,null],portis:[d,null],provided:[f,null],torus:[m,null],walletconnect:[y,null],walletlink:[v,null],ledger:[w,null]};for(const[r,n]of Object.entries(e))"function"!=typeof n?t[r]&&(t[r][1]=n):t[r]=[n,null];return t}(t),[t]),W=n.useCallback(()=>{T.active&&T.deactivate(),g(null),C(null),P("disconnected")},[T]);n.useMemo(()=>{S instanceof o.UnsupportedChainIdError&&(P("error"),C(new i(S.message)))},[S]);const G=n.useCallback(async(e="injected")=>{const t=++q.current;if(W(),t!==q.current)return;if(!F[e])return P("error"),void C(new c(e));P("connecting");const[r,n]=F[e]||[],a=await(null==r?void 0:r()),u=null==a||null==a.web3ReactConnector?void 0:a.web3ReactConnector({...n||{}});if(!u)return P("error"),void C(new c(e));try{g(e),await T.activate(u,void 0,!0),P("connected")}catch(e){if(t!==q.current)return;if(g(null),P("error"),e instanceof o.UnsupportedChainIdError)return void C(new i(e.message));if(a.handleActivationError){const t=a.handleActivationError(e);if(t)return void C(t)}C(e)}},[F,W,T]);n.useEffect(()=>{if(!U||!B)return;let e=!1;return I(null),async function(e,t){try{return"0x"!==await b(e,"eth_getCode",[t])}catch(e){return!1}}(B,U).then(t=>{e||(P("connected"),I(t?"contract":"normal"))}),()=>{e=!0,P("disconnected"),I(null)}},[U,B]);const H=n.useMemo(()=>{var e;return{_web3ReactContext:T,account:U||null,balance:_,chainId:O,connect:G,connector:s,connectors:F,error:k,ethereum:B,networkName:O?(null==(e=N.get(O))?void 0:e.type)||"unknown":null,providerInfo:R(s||"unknown"),reset:W,status:L,type:x}},[U,_,O,G,s,F,k,B,x,W,L,T]);return n.createElement(j.Provider,{value:{addBlockNumberListener:A,pollBalanceInterval:r,pollBlockNumberInterval:u,removeBlockNumberListener:M,wallet:H}},e)}function U(e){return n.createElement(o.Web3ReactProvider,{getLibrary:e=>e},n.createElement(q,Object.assign({},e)))}q.propTypes={children:r.node,connectors:r.objectOf(r.object),pollBalanceInterval:r.number,pollBlockNumberInterval:r.number},q.defaultProps={connectors:{},pollBalanceInterval:2e3,pollBlockNumberInterval:5e3},U.propTypes=q.propTypes,U.defaultProps=q.defaultProps,exports.ChainUnsupportedError=i,exports.ConnectionRejectedError=u,exports.ConnectorUnsupportedError=c,exports.KNOWN_CHAINS=N,exports.UseWalletProvider=U,exports.default=T,exports.getProviderFromUseWalletId=R,exports.getProviderString=function(e,t="unknown"){const r=P(t);return r&&r.strings[e]||e},exports.useWallet=T;
//# sourceMappingURL=index.js.map
